# GS870.prg

- Jobs: [12](#jobs)
- Tables: [7](#tables)

## INFO

| Field | Value |
| --- | --- |
| ECU | Getriebesteuerung GS 8.70 |
| ORIGIN | BMW TP-421 Mellersh |
| REVISION | 1.13 |
| AUTHOR | Softing SAG Ta, BMW TP-421 Mellersh |
| COMMENT | N/A |
| PACKAGE | N/A |
| SPRACHE | deutsch |

## Jobs

### Index

- [INITIALISIERUNG](#job-initialisierung) - Init-Job fuer EGS
- [INFO](#job-info) - Information SGBD
- [IDENT](#job-ident) - Ident-Daten fuer EGS
- [AIF_LESEN](#job-aif-lesen) - Auslesen des Anwender-Info-Feldes
- [FS_LESEN](#job-fs-lesen) - Fehlerspeicher lesen High-Konzept nach Lastenheft Codierung/Diagnose
- [FS_LOESCHEN](#job-fs-loeschen) - Fehlerspeicher loeschen fuer EGS
- [CODIER_CS_PRUEFEN](#job-codier-cs-pruefen) - Ueberpruefen der Codier-Checksumme fuer EGS
- [STATUS_IO_LESEN](#job-status-io-lesen) - Status Eingaenge EGS
- [SPEICHER_LESEN](#job-speicher-lesen) - Speicher Lesen
- [RESET_ADAPTION](#job-reset-adaption) - Alle Adaptionswerte loeschen
- [STEUERN_STELLGLIED](#job-steuern-stellglied) - Ansteuern der Stellglieder
- [DIAGNOSE_ENDE](#job-diagnose-ende) - Diagnose beenden

### INITIALISIERUNG

Init-Job fuer EGS

_No arguments._

#### Results

| Name | Type | Comment |
| --- | --- | --- |
| DONE | int | 1 wenn Okay |

### INFO

Information SGBD

_No arguments._

#### Results

| Name | Type | Comment |
| --- | --- | --- |
| ECU | string | Steuergeraet im Klartext |
| ORIGIN | string | Steuergeraete-Verantwortlicher |
| REVISION | string | Versions-Nummer |
| AUTHOR | string | Name aller Autoren |
| COMMENT | string | wichtige Hinweise |
| SPRACHE | string | deutsch, english |

### IDENT

Ident-Daten fuer EGS

_No arguments._

#### Results

| Name | Type | Comment |
| --- | --- | --- |
| JOB_STATUS | string | Status der Kommunikation (z.B. ACK) |
| ID_BMW_NR | string | BMW-Teilenummer |
| ID_HW_NR | int | BMW-Hardwarenummer |
| ID_COD_INDEX | string | Codier-Index |
| ID_DIAG_INDEX | string | Diagnose-Index |
| ID_BUS_INDEX | string | Bus-Index |
| ID_DATUM_KW | string | Herstelldatum KW |
| ID_DATUM_JAHR | string | Herstelldatum Jahr |
| ID_LIEF_NR | string | Lieferanten-Nummer |
| ID_SW_NR | string | Softwarenummer |
| ID_AI_NR | string | Aenderungsindex |
| ID_PROD_NR | string | Produktionsnummer |
| _TEL_ANTWORT | binary |  |

### AIF_LESEN

Auslesen des Anwender-Info-Feldes

_No arguments._

#### Results

| Name | Type | Comment |
| --- | --- | --- |
| JOB_STATUS | string |  |
| AIF_ADRESSE | long | AIF Basisadresse |
| AIF_FG_NR | string | Fahrgestellnummer |
| AIF_DATUM | string | Fertigungsdatum |
| AIF_AENDERUNGS_INDEX | string | Aenderungsindex |
| AIF_SW_NR | long | Softwarenummer |
| AIF_BEHOERDEN_NR | long | Behoerdennummer |
| AIF_ZB_NR | long | Zusbaunummer |

### FS_LESEN

Fehlerspeicher lesen High-Konzept nach Lastenheft Codierung/Diagnose

_No arguments._

#### Results

| Name | Type | Comment |
| --- | --- | --- |
| JOB_STATUS | string | normalerweise OKAY |
| F_ANZ_NR | int | Anzahl der gespeicherten Fehler |
| F_ORT_NR | int | momentan identisch Fehlerbytemaske |
| F_ORT_TEXT | string | Fehlerort als Text |
| F_HFK | int | Fehlerhaeufigkeit des jeweiligen Fehlers |
| F_CARB_HFK | int | CARB-Zaehler des jeweiligen Fehlers |
| F_ART_ANZ | int | Anzahl der Fehlerarten bei EGS = 8 |
| F_ART1_NR | int | Fehlerartenbyte |
| F_ART1_TEXT | string | Fehlerart als Text |
| F_ART2_NR | int | Fehlerartenbyte |
| F_ART2_TEXT | string | Fehlerart als Text |
| F_ART3_NR | int | Fehlerartenbyte |
| F_ART3_TEXT | string | Fehlerart als Text |
| F_ART4_NR | int | Fehlerartenbyte |
| F_ART4_TEXT | string | Fehlerart als Text |
| F_ART5_NR | int | Fehlerartenbyte |
| F_ART5_TEXT | string | Fehlerart als Text |
| F_UW_ANZ | int | Anzahl der Umweltbedingungen bei EGS variabel, zwischen 3 und 25 |
| F_UW1_NR | int | Index der 1. Umweltbedingung, 1.Satz |
| F_UW1_TEXT | string | Text der 1. Umweltbedingung, 1.Satz |
| F_UW1_WERT | int | Wert der 1. Umweltbedingung, 1.Satz |
| F_UW1_EINH | string | Einheit |
| F_UW2_NR | int |  |
| F_UW2_TEXT | string |  |
| F_UW2_WERT | int |  |
| F_UW2_EINH | string | Einheit |
| F_UW3_NR | int |  |
| F_UW3_TEXT | string |  |
| F_UW3_WERT | int |  |
| F_UW3_EINH | string | Einheit |
| F_UW4_NR | int |  |
| F_UW4_TEXT | string |  |
| F_UW4_WERT | int |  |
| F_UW4_EINH | string | Einheit |
| F_UW5_NR | int |  |
| F_UW5_TEXT | string |  |
| F_UW5_WERT | int |  |
| F_UW5_EINH | string | Einheit |
| F_UW6_NR | int |  |
| F_UW6_TEXT | string |  |
| F_UW6_WERT | int |  |
| F_UW6_EINH | string | Einheit |
| F_UW7_NR | int |  |
| F_UW7_TEXT | string |  |
| F_UW7_WERT | int |  |
| F_UW7_EINH | string | Einheit |
| F_UW8_NR | int |  |
| F_UW8_TEXT | string |  |
| F_UW8_WERT | int |  |
| F_UW8_EINH | string | Einheit |
| F_UW9_NR | int |  |
| F_UW9_TEXT | string |  |
| F_UW9_WERT | int |  |
| F_UW9_EINH | string | Einheit |
| F_1_BETRIEBSSTUNDEN | unsigned int | High-/Lowbyte Betriebsstundenzaehler, 1.Satz |
| F_2_BETRIEBSSTUNDEN | unsigned int | High-/Lowbyte Betriebsstundenzaehler, 2.Satz |
| F_3_BETRIEBSSTUNDEN | unsigned int | High-/Lowbyte Betriebsstundenzaehler, 3.Satz |
| TELEGRAMM_ANF | binary | Anforderungstelegramm |
| TELEGRAMM_ANT | binary | Antworttelegramm |

### FS_LOESCHEN

Fehlerspeicher loeschen fuer EGS

_No arguments._

#### Results

| Name | Type | Comment |
| --- | --- | --- |
| JOB_STATUS | string | OKAY, FEHLER |
| TELEGRAMM_ANF | binary | Anforderungstelegramm |
| TELEGRAMM_ANT | binary | Antworttelegramm |

### CODIER_CS_PRUEFEN

Ueberpruefen der Codier-Checksumme fuer EGS

_No arguments._

#### Results

| Name | Type | Comment |
| --- | --- | --- |
| JOB_STATUS | string | OKAY, FEHLER |
| CS_STATUS_DATEN | string | Datenbereich OKAY, FEHLER |
| CS_STATUS_POINTER | string | Pointerbereich OKAY, FEHLER |
| _TEL_ANTWORT | binary | Antworttelegramm |

### STATUS_IO_LESEN

Status Eingaenge EGS

_No arguments._

#### Results

| Name | Type | Comment |
| --- | --- | --- |
| JOB_STATUS | string | OKAY, FEHLER |
| STAT_MOTORDREHZAHL_WERT | int |  |
| STAT_MOTORDREHZAHL_EINH | string |  |
| STAT_ABTRIEBSDREHZAHL_WERT | int | Abtriebsdrehzahl |
| STAT_ABTRIEBSDREHZAHL_EINH | string | Abtriebsdrehzahl |
| STAT_DKG_WERT | int | DKG/WDK_BL |
| STAT_DKG_EINH | string | DKG/WDK_BL |
| STAT_LAST_WERT | int | Lastsignal |
| STAT_LAST_EINH | string | Lastsignal |
| STAT_MOTORTEMPERATUR_WERT | int | MOTORTEMPERATUR |
| STAT_MOTORTEMPERATUR_EINH | string | MOTORTEMPERATUR |
| STAT_GETRIEBETEMPERATUR_WERT | int | GETRIEBETEMPERATUR |
| STAT_GETRIEBETEMPERATUR_EINH | string | GETRIEBETEMPERATUR |
| STAT_UBAT_WERT | long | UBat |
| STAT_UBAT_EINH | string | UBat |
| STAT_RADDREHZAHL_VL_WERT | int |  |
| STAT_RADDREHZAHL_VL_EINH | string |  |
| STAT_RADDREHZAHL_VR_WERT | int |  |
| STAT_RADDREHZAHL_VR_EINH | string |  |
| STAT_RADDREHZAHL_HL_WERT | int |  |
| STAT_RADDREHZAHL_HL_EINH | string |  |
| STAT_RADDREHZAHL_HR_WERT | int |  |
| STAT_RADDREHZAHL_HR_EINH | string |  |
| STAT_EDS1_WERT | long |  |
| STAT_EDS1_EINH | string |  |
| STAT_EDS4_WERT | long |  |
| STAT_EDS4_EINH | string |  |
| STAT_MV1_EIN | int | 0 oder 1 |
| STAT_MV2_EIN | int | 0 oder 1 |
| STAT_MV3_EIN | int | 0 oder 1 |
| STAT_MV4_EIN | int | 0 oder 1 |
| STAT_MV5_EIN | int | 0 oder 1 |
| STAT_MVSL_EIN | int | Shift-Lock 0 oder 1 |
| STAT_BREMSSIGNAL_EIN | int | 0 oder 1 |
| STAT_L1_EIN | int | 0 oder 1 |
| STAT_L2_EIN | int | 0 oder 1 |
| STAT_L3_EIN | int | 0 oder 1 |
| STAT_L4_EIN | int | 0 oder 1 |
| STAT_PROG_TASTER | string | A/E oder C/S oder * /M oder ??? |
| STAT_PROG_TASTER_A_E_EIN | int | Programmtaster A/E ein |
| STAT_PROG_TASTER_C_S_EIN | int | Programmtaster C/S ein |
| STAT_PROG_TASTER_M_EIN | int | Programmtaster * /M ein |
| STAT_NOTPROGRAMM_EIN | int | 0 oder 1 |
| STAT_FGR_SYSTEM | string | 5 Statustexte |
| STAT_ASC_REGELT_EIN | int | 0 oder 1, passiv oder aktiv |
| STAT_ASC_TASTER_EIN | int | 0 oder 1, passiv oder aktiv |
| STAT_ADAPT_PROG | int | 1. 2. 3. 4. 5. 6. 7. 8. adaptives Fahrprogramm |
| STAT_GANG | int | 1. 2. 3. 4. 5.Gang |
| STAT_KICK_DOWN_EIN | int | 0 oder 1 |
| STAT_KURVENFAHRT_FEHLER_EIN | int | 0 oder 1 |
| STAT_STOP_GO_EIN | int | 0 oder 1 |
| STAT_TIP_DOWN_EIN | int | 0 oder 1 |
| STAT_TIP_UP_EIN | int | 0 oder 1 |
| STAT_LAUFENDE_SCHALTUNG_EIN | int | 0 oder 1 |
| STAT_GANG_EINLEGEN_EIN | int | 0 oder 1 |
| STAT_HOCHSCHALTUNG_EIN | int | 0 oder 1 |
| STAT_RUECKSCHALTUNG_EIN | int | 0 oder 1 |
| STAT_SCHALTUNGSART_LETZTE | string | 11 Texte, letzte Schaltung |
| STAT_SCHALTUNGSART_AKTUELL | string | 11 Texte, aktuelle Schaltung |
| STAT_PROG_MODUS | string | A/E oder C/S oder * /M oder ??? |
| STAT_KOMBISCHNITTSTELLE | string | seriell 1,4 Bd oder 150 Bd |
| STAT_SHIFT_LOCK_VARIANTE_EIN | int | 0 oder 1, ja oder nein |
| STAT_GETRIEBESCHALTER | string | oben oder unten |
| STAT_WAEHLHEBEL_POSITION | string | P,R,N,D,4,3,2 |
| _TEL_ANTWORT | binary | Antworttelegramm |

### SPEICHER_LESEN

Speicher Lesen

#### Arguments

| Name | Type | Comment |
| --- | --- | --- |
| SPEICHERART | string | Speicherart: EPROM, EEPROM, RAM_INTERN, RAM_EXTERN |
| ADRESSE | long | Startadresse |
| ANZAHL | int | Anzahl zu lesender Bytes |

#### Results

| Name | Type | Comment |
| --- | --- | --- |
| JOB_STATUS | string | OKAY, FEHLER |
| DATEN | binary | Inhalt der Speicherzellen |
| TELEGRAMM_ANF | binary | Anforderungstelegramm |
| TELEGRAMM_ANT | binary | Antworttelegramm |

### RESET_ADAPTION

Alle Adaptionswerte loeschen

_No arguments._

#### Results

| Name | Type | Comment |
| --- | --- | --- |
| JOB_STATUS | string | OKAY, FEHLER |
| TELEGRAMM_ANF | binary | Anforderungstelegramm |
| TELEGRAMM_ANT | binary | Antworttelegramm |

### STEUERN_STELLGLIED

Ansteuern der Stellglieder

#### Arguments

| Name | Type | Comment |
| --- | --- | --- |
| STELLGL | string | Anzusteuerndes Stellglied table Stellglieder STELLGLIED PIN |
| STEUERART | string | Steuerungsart: NICHT_ANSTEUERN SEK_TAKT_ANSTEUERN STAENDIG_ANSTEUERN |

#### Results

| Name | Type | Comment |
| --- | --- | --- |
| JOB_STATUS | string | Liefert: OKAY od. ERROR_NACK |
| STAT_ANSTEUERUNG | int | Ansteuerergebnis 0 : Stellglied wird ordnungsgemaess angesteuert 1 : Pin-Nr ist unbekannt 2 : nicht gueltig 3 : nicht gueltig 4 : Stellglied nicht ansteuerbar |

### DIAGNOSE_ENDE

Diagnose beenden

_No arguments._

#### Results

| Name | Type | Comment |
| --- | --- | --- |
| JOB_STATUS | string | OKAY, FEHLER |
| TELEGRAMM_ANF | binary | Anforderungstelegramm |
| TELEGRAMM_ANT | binary | Antworttelegramm |

## Tables

### Index

- [JOBRESULT](#table-jobresult) (8 × 2)
- [FORTTEXTE](#table-forttexte) (41 × 5)
- [FUMWELTTEXTE](#table-fumwelttexte) (13 × 6)
- [FUMWELTBYTE17TEXTE](#table-fumweltbyte17texte) (10 × 4)
- [FARTTEXTE](#table-farttexte) (12 × 2)
- [SPEICHER](#table-speicher) (6 × 2)
- [STELLGLIEDER](#table-stellglieder) (12 × 2)

### JOBRESULT

Dimensions: 8 rows × 2 columns

| SB | STATUS_TEXT |
| --- | --- |
| 0xA0 | OKAY |
| 0xA1 | BUSY |
| 0xA2 | ERROR_ECU_REJECTED |
| 0xB0 | ERROR_ECU_PARAMETER |
| 0xB1 | ERROR_ECU_FUNCTION |
| 0xB2 | ERROR_ECU_NUMBER |
| 0xFF | ERROR_ECU_NACK |
| 0x00 | ERROR_ECU_UNKNOWN_STATUSBYTE |

### FORTTEXTE

Dimensions: 41 rows × 5 columns

| ORT | ORTTEXT | UW_1 | UW_2 | UW_3 |
| --- | --- | --- | --- | --- |
| 0x02 | Magnetventil Shift-Lock | 0x0A | 0x0B | 0x09 |
| 0x03 | Magnetventil 5 (RIS) | 0x0D | 0x08 | 0x09 |
| 0x04 | EDS 4 (lock up) | 0x0D | 0x08 | 0x09 |
| 0x05 | EDS 1 (pressure line) | 0x0D | 0x08 | 0x09 |
| 0x08 | Getriebeschalter L1..L4 | 0x0B | 0x05 | 0x09 |
| 0x0C | Programmtaster | 0x0B | 0x05 | 0x09 |
| 0x10 | N_Turbine | 0x0D | 0x08 | 0x05 |
| 0x12 | Kick-Down | 0x0D | 0x02 | 0x09 |
| 0x16 | Getriebeoeltemperatur | 0x06 | 0x07 | 0x09 |
| 0x1A | Batteriespannung | 0x09 | 0x09 | 0x09 |
| 0x1E | Magnetventil 1 (Sol. A) | 0x0D | 0x08 | 0x09 |
| 0x1F | Magnetventil 4 (Sol. OVR) | 0x0D | 0x08 | 0x09 |
| 0x20 | Magnetventil 3 (Sol. C) | 0x0D | 0x08 | 0x09 |
| 0x21 | Magnetventil 2 (Sol. B) | 0x0D | 0x08 | 0x09 |
| 0x26 | Raddrehzahl vorne links | 0x0D | 0x05 | 0x09 |
| 0x27 | Raddrehzahl vorne rechts | 0x0D | 0x05 | 0x09 |
| 0x28 | Raddrehzahl hinten links | 0x0D | 0x05 | 0x09 |
| 0x29 | Raddrehzahl hinten rechts | 0x0D | 0x05 | 0x09 |
| 0x2A | Abbtriebsdrehzahl | 0x0D | 0x08 | 0x06 |
| 0x2E | Schrittschaltung | 0x0B | 0x0C | 0x09 |
| 0x36 | Klemme 87 (DME) | 0x06 | 0x07 | 0x09 |
| 0x64 | Gangueberwachung | 0x0D | 0x08 | 0x05 |
| 0x65 | Gangueberwachung /WK | 0x0D | 0x06 | 0x05 |
| 0x67 | int. Fehler 1 (EPROM) | 0x06 | 0x07 | 0x09 |
| 0x68 | int. Fehler 4 (FET) | 0x09 | 0x09 | 0x09 |
| 0x69 | Ueberdrehueberwachung | 0x0D | 0x08 | 0x05 |
| 0x6A | Festbremsdrehzahl | 0x0D | 0x08 | 0x02 |
| 0x6B | Raddrehzahlen | 0x0D | 0x05 | 0x09 |
| 0x6C | Fehlende EOL | 0x09 | 0x09 | 0x09 |
| 0x6D | int. Fehler 2 (EEPROM) | 0x09 | 0x09 | 0x09 |
| 0x6E | int. Fehler 3 (Watchdog) | 0x09 | 0x09 | 0x09 |
| 0x96 | Ueberwachung CAN-Bus | 0x05 | 0x08 | 0x09 |
| 0x97 | MUL_INFO / MUL_COD | 0x01 | 0x08 | 0x09 |
| 0x98 | MDZ_DME | 0x0D | 0x05 | 0x03 |
| 0x9A | WDK_BL | 0x0D | 0x06 | 0x05 |
| 0x9B | Motortemperatur | 0x06 | 0x08 | 0x09 |
| 0x9C | CAN-Time-Out | 0x0B | 0x05 | 0x09 |
| 0xA1 | Motordrehzahl | 0x0D | 0x08 | 0x05 |
| 0xA2 | Bremssignal | 0x0B | 0x05 | 0x09 |
| 0xA3 | Momenteneingriff | 0x0D | 0x06 | 0x09 |
| 0xFF | unbekannter Fehlerort | 0x00 | 0x00 | 0x00 |

### FUMWELTTEXTE

Dimensions: 13 rows × 6 columns

| LABEL | UWTEXT | UW_EINH | UW_MULT | UW_DIV | UW_ADD |
| --- | --- | --- | --- | --- | --- |
| 0x01 | CAN Stand DME | - | 1 | 1 | 0 |
| 0x02 | Drosselklappenwinkel | % | 100 | 255 | 0 |
| 0x03 | Momentenred. EGS | % | 100 | 255 | 0 |
| 0x05 | Abbtriebsdrehzahl | 1/min | 32 | 1 | 0 |
| 0x06 | Motordrehzahl | 1/min | 32 | 1 | 0 |
| 0x07 | Motortemperatur | Grad C | 1 | 1 | -48 |
| 0x08 | Getriebeoeltemperatur | Grad C | 1 | 1 | -55 |
| 0x09 | Batteriespannung | Volt | 16 | 198 | 0 |
| 0x0A | Label Byte 17 | - | 1 | 1 | 0 |
| 0x0B | Label Byte 18 | - | 1 | 1 | 0 |
| 0x0C | Label Byte 20 | - | 1 | 1 | 0 |
| 0x0D | Label Byte 21 | - | 1 | 1 | 0 |
| 0xXY | unbekannte Umweltbedingung | XY | 1 | 1 | 0 |

### FUMWELTBYTE17TEXTE

Dimensions: 10 rows × 4 columns

| ARTNR | ARTTEXT | A_0 | A_1 |
| --- | --- | --- | --- |
| 0x00 | --- |  --- |  --- |
| 0x01 | Bremse |  nicht betaetigt |  betaetigt |
| 0x02 | Magnetventil Shift-Lock (nur LA USA/Jap.) |  nicht aktiv |  aktiv |
| 0x04 | Magnetventil 6 (nur GS7.32 |  nicht aktiv |  aktiv |
| 0x08 | Magnetventil 5 (nur GS7.32) |  nicht aktiv |  aktiv |
| 0x10 | Magnetventil 4 |  nicht aktiv |  aktiv |
| 0x20 | Magnetventil 3 |  nicht aktiv |  aktiv |
| 0x40 | Magnetventil 2 |  nicht aktiv |  aktiv |
| 0x80 | Magnetventil 1 |  nicht aktiv |  aktiv |
| 0xFF | nicht belegt |  ? |  ? |

### FARTTEXTE

Dimensions: 12 rows × 2 columns

| ARTNR | ARTTEXT |
| --- | --- |
| 0x00 | --- |
| 0x01 | Plausibilitaet |
| 0x02 | Kurzschluss gegen U-Batt |
| 0x03 | Kurzschluss gegen Masse |
| 0x04 | Leitungsunterbrechung |
| 0x05 | Leitungsunterbrechung oder Kurzschluss gegen U-Batt |
| 0x06 | Leitungsunterbrechung oder Kurzschluss gegen Masse |
| 0x10 | Fehler nach Start vorhanden |
| 0x20 | sporadischer Fehler |
| 0x40 | Ersatzfunktion aktiv |
| 0x80 | Fehler momentan vorhanden |
| 0xFF | unbekannte Fehlerart |

### SPEICHER

Dimensions: 6 rows × 2 columns

| SPEICHER | WERT |
| --- | --- |
| ROM | 0x01 |
| EPROM | 0x02 |
| EEPROM | 0x03 |
| RAM_INTERN | 0x04 |
| RAM_EXTERN | 0x05 |
| DEFAULT | 0x00 |

### STELLGLIEDER

Dimensions: 12 rows × 2 columns

| STELLGLIED | PIN |
| --- | --- |
| MAGNETVENTIL_1 | 0x1e |
| MAGNETVENTIL_2 | 0x21 |
| MAGNETVENTIL_3 | 0x20 |
| MAGNETVENTIL_4 | 0x1f |
| MAGNETVENTIL_5 | 0x03 |
| MAGNETVENTIL_SL | 0x02 |
| EDS_1 | 0x05 |
| EDS_4 | 0x04 |
| L5 | 0x11 |
| L6 | 0x14 |
| L7 | 0x1B |
| KOMBI | 0x19 |
